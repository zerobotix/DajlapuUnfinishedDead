@{
    ViewBag.Title = "Доска объявлений";
}

@section Styles {
    <link href="~/Styles/animal-list.css" rel="stylesheet" />
}

@section Scripts {
    <script type="text/javascript" charset="utf-8" src="https://api-maps.yandex.ru/services/constructor/1.0/js/?sid=Xc91SP-rHaQMdt5vAtjj_5Vq-AeAT7HR&lang=ru_RU&id=search-map"></script>
    <script src="~/Scripts/animal-list.js"></script>
}

<div id="filter-form" data-bind="css: formColor">
    <div class="form-header">Доска объявлений</div>

    <div class="search-type">
        <div class="button" data-bind="active: { state: searchType, value: 'found' }">Найден</div>
        <div class="button" data-bind="active: { state: searchType, value: 'lost' }">Пропал</div>
    </div>
    <div class="animal-type">
        <i class="dog-icon" data-bind="active: { state: animalType, value: 'dog' }"></i>
        <i class="cat-icon" data-bind="active: { state: animalType, value: 'cat' }"></i>
    </div>

    <div class="sex-type js-accordion">
        <div class="header js-header">Пол</div>
        <div class="options js-body">
            <i class="male-icon" data-bind="active: { state: sexTypes, value: 'male' }"></i>
            <i class="female-icon" data-bind="active: { state: sexTypes, value: 'female' }"></i>
        </div>
    </div>
    <div class="size-type js-accordion">
        <div class="header js-header">Размер</div>
        <div class="options js-body">
            <div data-bind="visible: animalType() == 'dog'">
                <i class="s-size-dog-icon" data-bind="active: { state: sizeTypes, value: 'small' }"></i>
                <i class="m-size-dog-icon" data-bind="active: { state: sizeTypes, value: 'medium' }"></i>
                <i class="l-size-dog-icon" data-bind="active: { state: sizeTypes, value: 'large' }"></i>
            </div>
            <div data-bind="visible: animalType() != 'dog'">
                <i class="s-size-cat-icon" data-bind="active: { state: sizeTypes, value: 'small' }"></i>
                <i class="l-size-cat-icon" data-bind="active: { state: sizeTypes, value: 'large' }"></i>
            </div>
        </div>
    </div>

    <div class="color-type js-accordion">
        <div class="header js-header">Окрас</div>
        <div class="options js-body">
            <ul data-bind="foreach: availableColors">
                <li class="checkbox" data-bind="active: { state: $root.colorTypes, value: id }">
                    <i class="checkbox-icon"></i>
                    <label data-bind="text: name"></label>
                </li>
            </ul>
        </div>
    </div>

    <div class="breed-type js-accordion">
        <div class="header js-header">Порода</div>
        <div class="js-body">
            <div class="search">
                <input type="text" placeholder="Поиск..." />
                <i class="search-icon">S</i>
            </div>
            <div class="options">
                <ul data-bind="foreach: availableBreeds">
                    <li class="checkbox" data-bind="active: { state: $root.breedTypes, value: id }">
                        <i class="checkbox-icon"></i>
                        <label data-bind="text: name"></label>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="found-time js-accordion">
        <div class="header js-header">Время обнаружения</div>
        <div class="options js-body">
            <input type="date" />
            <input type="date" />
        </div>
    </div>

    <div class="additional-options">
        <div class="checkbox" data-bind="active: { state: animalStatuses, value: 'dead' }">
            <i class="checkbox-icon"></i>
            <label>RIP</label>
        </div>
        <div class="checkbox" data-bind="active: { state: animalStatuses, value: 'help' }">
            <i class="checkbox-icon"></i>
            <label>SOS</label>
        </div>
        <div class="checkbox" data-bind="active: { state: animalStatuses, value: 'housing' }">
            <i class="checkbox-icon"></i>
            <label>Передержка</label>
        </div>
    </div>

    <div class="result-count">
        Найдено: <span data-bind="text: totalResultsCount"></span> объявлений
    </div>
</div>

<div class="results-container" data-bind="css: { loading: isResultsLoading }">
    <div id="animals-list" data-bind="foreach: searchResults">
        <div class="animal-preview" data-bind="css: style">
            <a href="#">
                <div class="foreground" data-bind="text: text"></div>
                <img data-bind="attr: { src: imgUrl }" />
            </a>
        </div>
    </div>

    <div id="search-map">
    </div>
</div>